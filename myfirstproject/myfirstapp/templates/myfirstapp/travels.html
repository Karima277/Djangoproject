{%load static%}
<html>
  <head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
  
  </head>
 <body >
    <div class="chat-icon">
        <i style="color: white;" class="fas fa-comment-alt"></i>
      </div>
      
      <div class="chat-container">
        <div class="chat-header">
          <h3> Kay, votre assistant virtuel</h3>
          <button class="close-btn"><i class="fas fa-times"></i></button>
        </div>
        <div class="chat-body">
          <!-- Chat messages will be displayed here -->
        </div>
        <div class="chat-footer">
          <input type="text" placeholder="Type your message...">
          <button class="send-btn"><i class="fas fa-paper-plane"></i></button>
        </div>
      </div>
      <script>
  const chatIcon = document.querySelector('.chat-icon');
  const chatContainer = document.querySelector('.chat-container');
  const closeBtn = document.querySelector('.close-btn');
  const sendBtn = document.querySelector('.send-btn');
  const chatBody = document.querySelector('.chat-body');
  const inputField = document.querySelector('input');
  
  let isChatOpen = false;
  
  // Toggle the visibility of the chat container
  chatIcon.addEventListener('click', () => {
    isChatOpen = !isChatOpen;
    if (isChatOpen) {
      chatContainer.style.display = 'block';
    } else {
      chatContainer.style.display = 'none';
    }
  });
  
  // Close the chat container when the close button is clicked
  closeBtn.addEventListener('click', () => {
    isChatOpen = false;
    chatContainer.style.display = 'none';
  });
  
  // Send a message when the send button is clicked
  sendBtn.addEventListener('click', () => {
    const message = inputField.value;
    sendMessage(message);
  });
  
  // Send a message when the enter key is pressed
  inputField.addEventListener('keypress', (event) => {
    if (event.key === 'Enter') {
      const message = inputField.value;
      sendMessage(message);
    }
  });
  
  // Send a message to the chatbot and receive a response
  function sendMessage(message) {
    if (message.trim() === '') {
      return;
    }
    const chatMessage = document.createElement('div');
    chatMessage.classList.add('chat-message', 'outgoing');
    chatMessage.textContent = message;
    chatBody.appendChild(chatMessage);
    inputField.value = '';
    setTimeout(() => {
      const response = getResponse(message);
      const chatMessage = document.createElement('div');
      chatMessage.classList.add('chat-message', 'incoming');
      chatMessage.textContent = response;
      chatBody.appendChild(chatMessage);
      chatBody.scrollTop = chatBody.scrollHeight;
    }, 1000);
  }
  
  // Get a response from the chatbot based on the user's message
  function getResponse(message) {
    const keywords = {
      acheter: "Chez nous, l'achat de votre propriété idéale est facile ! Que vous cherchiez une maison, un appartement ou un terrain, sélectionnez simplement le type de bien dans le menu en haut, ou remplissez le formulaire d'achat à l'accueil pour trouver la perle rare.",
      vendre: "Vous souhaitez vendre votre bien rapidement et efficacement ? C'est facile avec Kay! Commencez par sélectionner le type de bien dans le menu en haut,puis continuez en remplissant notre formulaire détaillé pour décrire les caractéristiques de votre bien.",
      louer: 'Vous cherchez un logement à louer ? Kay en ligne vous simplifie la vie ! Il vous suffit de sélectionner le type de bien que vous recherchez dans le menu en haut, puis de remplir notre formulaire de demande de location pour nous faire part de vos critères.',
    };
    const words = message.toLowerCase().split(' ');
    for (const word of words) {
      if (keywords[word]) {
        return keywords[word];
      }
    }
    return "I'm sorry, I didn't understand your message.";
  }
  
      </script>

  

<section class="w-full h-[100vh]  bg-header  bg-cover bg-no-repeat bg-center bg-color1 bg-blend-multiply bg-opacity-60 " >
  <section class="w-full flex flex-wrap justify-center ">
      <header 
      class="w-[85%]  xl:w-[73%]  container hidden lg:flex justify-between h-[60px]  items-center py-[45px] border-b-[1px] border-white border-opacity-40">
      <figure class="w-[140px]">
         <img src="{% static 'imgs/logo-light.png' %}" alt="" class="w-[100%]">
      </figure>
      <nav class="h-[100%] md:w-[70%]">
          <ul class="h-[100%] flex items-center gap-8 justify-end">
              <li class="list-none  "><a class="decoration-none text-white hover:text-color3 transition-all duration-500"
                      href="{% url 'home_page' %}">Home</a></li>
              <li class="list-none"><a class="decoration-none text-white  hover:text-color3 transition-all duration-500"
                      href="{% url 'travels' %}">Tours</a></li>
              {% if user.is_superuser %}
              <li class="list-none "><a class="decoration-none text-white  hover:text-color3 transition-all duration-500"
                href="{% url 'admin:index' %}">Admin</a></li>
              <li class="list-none "><a class="decoration-none text-white  hover:text-color3 transition-all duration-500"
                href="{% url 'logout_view' %}">Log out</a></li>
              {% elif user.is_authenticated %}
              <li class="list-none "><a class="decoration-none text-white  hover:text-color3 transition-all duration-500"
                href="{% url 'profile' %}">Profile</a></li>
              <li class="list-none "><a class="decoration-none text-white  hover:text-color3 transition-all duration-500"
                href="{% url 'logout_view' %}">Log out</a></li>
              {% else %}
              <li class="list-none "><a class="decoration-none text-white  hover:text-color3 transition-all duration-500"
                      href="{% url 'login_view' %}">Log In</a></li>
              {% endif %}
          </ul>
      </nav>
  </header>
  <div class="container" style="margin-top: 20px;">
    
    
    
    <div class="row" style="margin-top: 40px;">
        {% for travel in Travels%}
            <div class="col-md-4" >
                <div class="card mb-4 box-shadow">
                <img class="card-img-top" src="{{travel.image.url}}" alt="Maison">
                <div  class="card-body">
                    <h6 class="card-title d-inline-block align-middle"></h5>
                    <div class="float-right">
                        {% if travel.promotion %}
                        <p class="card-subtitle mb-2 text-muted d-inline-block align-middle">
                             {{ travel.promotion.name }} ({{ travel.promotion.discount_percentage }}% off)
                        </p>
                            {% endif %}
                        <h6 class="card-subtitle mb-2 text-muted d-inline-block align-middle price text-right" > {{travel.price}}DH</h6>
                    </div>
                    <p class="card-text mt-3">
                    <span class="badge badge-secondary mr-2">{{travel.city}}</span>
                    <span class="badge badge-secondary mr-2">{{travel.destination}}</span>
                   
                    </p>
                    
                    <div class="d-flex justify-content-between align-items-center mt-3">
                    <div class="btn-group">
                        <a href="{% url 'travel_details' travel.id %}" class="btn btn-sm btn-outline-secondary">Details</a>
                        <button type="button" class="btn btn-sm btn-outline-secondary">Add to cart</button>
                    </div>
                    </div>
                </div>
                </div>
            </div>
            {%endfor%}
        
      
  </div>
  



 </body>

</html>